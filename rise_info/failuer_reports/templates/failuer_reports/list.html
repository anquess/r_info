{% extends "base.html" %}
{% load pygmentize %}

{% block header %}
<style>{% pygments_css %}</style>
{% endblock %}

{% block main %}

<div class="welcome">
    <h1>障害通報一覧</h1>
</div>
<a class="btn btn-primary float-end" href="{% url 'failuer_report_new' %}">＋</a>
{% if infos %}
    <table class="table">
        <thead>
        <tr>
            <th>タイトル</th>
            <th>概要</th>
            <th>投稿日</th>
            <th>官署</th>
            <th>編集</th>
        </tr>
        </thead>
        <tbody>
        {% for info in infos %}
        <tr>
            <th><a href="{% url 'failuer_report_detail' info.id %}">{{ info.title }}</a></th>
            <th>{{ info.sammary | linebreaksbr }}</th>
            <th>{{ info.created_at | date:"y/n/j H:i" }}</th>
            <th>{{ info.created_by.last_name }}</th>
            {% if user == info.created_by %}
                <th><a class="btn btn-primary" href="{% url 'failuer_report_edit' info.id %}">編集</a>
                    <a class="btn btn-danger" href="{% url 'failuer_report_del' info.id %}">削除</a></th>
            {% endif %}
                </tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>障害通報はまだ登録されていません。</p>
{% endif %}
{% endblock %}